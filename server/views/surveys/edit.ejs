<% include ../partials/header.ejs %>

    <!-- MAIN CONTENT -->
    <div class="container">
      <div class="row">
        <div class="col-md-6">
          <h1><%= title %></h1>
            <form class="form" method="post">
            <div class=" col-md-12">                         
              <table class="table table-bordered table-striped table-hover">
                <tr>
                  <th class="text-left col-12"> Author: </th> 
                </tr>
                <tr class="d-flex">
                    <td class="text-left col-12"><input type="text" class="form-control" name="author" value="<%= surveys.Author %>" required></td> 
                  </tr>
                  <tr>
                    <th class="text-left col-12"> Title: </th> 
                  </tr>
                  <tr class="d-flex">
                    <td class="text-left col-12"><input type="text" class="form-control" name="title" value="<%= surveys.Title %>" required></td>  
                  </tr>
                  <tr>
                    <th class="text-left col-12"> MC Questions: </th> 
                    <input id="mclength" value="<%=surveys.MCQuestions.length%>">

                    
                  </tr>
                    <% for(let count = 0; count < surveys.MCQuestions.length; count++) { %>
                      <tr><td class="text-left col-12"><input type="text" class="form-control" name="questionsMC" value="<%= surveys.MCQuestions[count].Title %>" required></td></tr>
                      <tr><td class="text-left col-12"><input type="text" class="form-control" name="questionsMC" value="<%= surveys.MCQuestions[count].Option1 %>" required ></td></tr> 
                      <tr><td class="text-left col-12"><input type="text" class="form-control" name="questionsMC" value="<%= surveys.MCQuestions[count].Option2 %>" required></td></tr>
                      <tr><td class="text-left col-12"><input type="text" class="form-control" name="questionsMC" value="<%= surveys.MCQuestions[count].Option3 %>" required></td></tr>
                      <tr><td class="text-left col-12"><input type="text" class="form-control" name="questionsMC" value="<%= surveys.MCQuestions[count].Option4 %>" required></td></tr>
                      <% } %>
                      <tr>
                        <th class="text-left col-12"> TF Questions: </th> 
                        <input id="tflength" value="<%=surveys.TFQuestions.length%>">

                      </tr>
                      <% for(let count = 0; count < surveys.TFQuestions.length; count++) { %>
                        <tr><td class="text-left col-12"><input type="text" class="form-control" name="questionsTF" value="<%= surveys.TFQuestions[count].Title %>" required></td></tr>
                      <tr><td class="text-left col-12"><input type="text" class="form-control" name="questionsTF" value="<%= surveys.TFQuestions[count].Option1 %>" required readonly="readonly"></td></tr>
                    <tr> <td class="text-left col-12"><input type="text" class="form-control" name="questionsTF" value="<%= surveys.TFQuestions[count].Option2 %>" required readonly="readonly"></td></tr>
                        <% } %>
                  </table>
                  <input id="questionsTF" name="questionsTF" value="" hidden="hidden">
                  <input id="questionsMC" name="questionsMC" value="" hidden ="hidden">
              <br>
              <button type="button" onclick="onSubmit()"class="btn btn-primary"></i> Submit</button>
              <a href="/surveys" class="btn btn-warning"><i class="fa fa-undo"></i> Cancel</a>
              <br>
              <br>
              <br>
              <br>
            </div>
          </form>
        </div>
      </div>
    </div>
    <script>
      function onSubmit(){
        let questionsTF = [];
      let questionsMC =[];
      let mclength = document.getElementById("mclength").value;
      console.log(mclength);
      
      let tflength = document.getElementById("tflength").value;
      console.log(tflength);
        for(let count = 0; count < mclength*5; count+4 ){
          console.log(document.getElementsByName("questionsMC")[count+1].value);
          console.log(document.getElementsByName("questionsMC")[count+4].value);
          let mcObject = {
          Title: document.getElementsByName("questionsMC")[count].value,
          Option1: document.getElementsByName("questionsMC")[count+1].value,
          Option1Total: 0,
          Option2: document.getElementsByName("questionsMC")[count+2].value,
          Option2Total: 0,
          Option3: document.getElementsByName("questionsMC")[count+3].value,
          Option3Total: 0,
          Option4: document.getElementsByName("questionsMC")[count+4].value,
          Option4Total: 0
        }
        console.log(mcObject);
        questionsMC.push(mcObject);
        console.log(questionsMC);
        document.getElementById("questionsMC").value = JSON.stringify(questionsMC);
        }
        for(let count = 0; count < tflength*3; count+ 2){
          let tfObject = {
          Title: document.getElementsByName("questionsTF")[count].value,
          Option1: document.getElementsByName("questionsMC")[count+1].value,
          Option1Total: 0,
          Option2: document.getElementsByName("questionsMC")[count+2].value,
          Option2Total: 0
          
        }
        console.log(tfObject);
        questionsTF.push(tfObject);
        console.log(questionsTF);
        document.getElementById("questionsTF").value = JSON.stringify(questionsTF);
        }
      }
    </script>
  

<% include ../partials/footer.ejs %>